From 641a3a731b2ec343202b4669538e4873f5f2898f Mon Sep 17 00:00:00 2001
From: Daron Chabot <dchabot@bnl.gov>
Date: Wed, 27 Mar 2013 11:01:32 -0400
Subject: [PATCH 2/4] Correct motor parameter names.

To build against Motor 6.7.1.
---
 pmacApp/pmacAsynMotorPortSrc/pmacAxis.cpp       |    6 +++---
 pmacApp/pmacAsynMotorPortSrc/pmacController.cpp |    2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/pmacApp/pmacAsynMotorPortSrc/pmacAxis.cpp b/pmacApp/pmacAsynMotorPortSrc/pmacAxis.cpp
index 614dbdf..3a7f604 100644
--- a/pmacApp/pmacAsynMotorPortSrc/pmacAxis.cpp
+++ b/pmacApp/pmacAsynMotorPortSrc/pmacAxis.cpp
@@ -121,9 +121,9 @@ asynStatus pmacAxis::getAxisInitialStatus(void)
   } else {
     setDoubleParam(pC_->motorLowLimit_,  low_limit*scale_);
     setDoubleParam(pC_->motorHighLimit_, high_limit*scale_);
-    setDoubleParam(pC_->motorPGain_,     pgain);
-    setDoubleParam(pC_->motorIGain_,     igain);
-    setDoubleParam(pC_->motorDGain_,     dgain);
+    setDoubleParam(pC_->motorPgain_,     pgain);
+    setDoubleParam(pC_->motorIgain_,     igain);
+    setDoubleParam(pC_->motorDgain_,     dgain);
     setIntegerParam(pC_->motorStatusHasEncoder_, 1);
     setIntegerParam(pC_->motorStatusGainSupport_, 1);
   }
diff --git a/pmacApp/pmacAsynMotorPortSrc/pmacController.cpp b/pmacApp/pmacAsynMotorPortSrc/pmacController.cpp
index ccb1bd3..f0e5394 100644
--- a/pmacApp/pmacAsynMotorPortSrc/pmacController.cpp
+++ b/pmacApp/pmacAsynMotorPortSrc/pmacController.cpp
@@ -383,7 +383,7 @@ asynStatus pmacController::writeFloat64(asynUser *pasynUser, epicsFloat64 value)
     /*Now set position on encoder axis, if one is in use.*/
                 
     if (pAxis->encoder_axis_) {
-      getDoubleParam(motorEncoderRatio_,  &encRatio);
+      getDoubleParam(motorEncRatio_,  &encRatio);
       encposition = (epicsInt32) floor((position*encRatio) + 0.5);
                   
       sprintf(command, "#%dK M%d61=%d*I%d08 M%d62=%d*I%d08",
-- 
1.7.10.4

